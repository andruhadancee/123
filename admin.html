<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Cyber Club - Админ-панель</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="cyberclub-logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="cyberclub-logo.png">
    <link rel="apple-touch-icon" href="cyberclub-logo.png">
    <link rel="shortcut icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/style.css?v=2.1">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/skeleton.css">
</head>
<body>
    <!-- Loader -->
    <div class="loader-container" id="loader">
        <div class="loader-light-rays"></div>
        <div class="loader-wave"></div>
        <div class="loader-wave-2"></div>
        <div class="loader">
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
        </div>
        <div class="loader-text">Загрузка панели...</div>
    </div>

    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="light-rays"></div>
        <div class="animated-bg-wave"></div>
        <div class="animated-bg-wave-2"></div>
        <div class="overlay"></div>
        <canvas id="particles-canvas"></canvas>
    </div>
    
    <!-- Header -->
    <header>
        <div class="container">
            <a href="index.html" class="logo">
                <img src="cyberclub-logo.png" alt="WB Cyber Club" class="logo-image">
            </a>
        </div>
    </header>

    <!-- Admin Content -->
    <main class="container">
        <div class="admin-header">
            <h1 class="page-title">Админ-панель</h1>
            <button class="btn-primary" id="add-tournament-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Добавить турнир
            </button>
        </div>

        <!-- Tabs -->
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="active">Активные турниры</button>
            <button class="tab-btn" data-tab="past">Прошедшие турниры</button>
            <button class="tab-btn" data-tab="teams">Зарегистрированные команды</button>
            <button class="tab-btn" data-tab="disciplines">Дисциплины</button>
            <button class="tab-btn" data-tab="links">Ссылки на формы</button>
            <button class="tab-btn" data-tab="regulations">Регламент</button>
            <button class="tab-btn" data-tab="social">Социальные кнопки</button>
        </div>

        <!-- Active Tournaments Tab -->
        <div class="tab-content active" id="active-tab">
            <div class="tournaments-admin-grid" id="active-tournaments-grid">
                <!-- Active tournaments will be loaded here -->
            </div>
        </div>

        <!-- Past Tournaments Tab -->
        <div class="tab-content" id="past-tab">
            <div class="admin-header" style="margin-bottom: 20px;">
                <button class="btn-primary" id="add-past-tournament-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Добавить прошедший турнир
                </button>
            </div>
            <div class="tournaments-admin-grid" id="past-tournaments-grid">
                <!-- Past tournaments will be loaded here -->
            </div>
        </div>

        <!-- Teams Tab -->
        <div class="tab-content" id="teams-tab">
            <div class="links-container">
                <div class="admin-header" style="margin-bottom: 20px;">
                    <h2>Зарегистрированные команды</h2>
                    <button class="btn-primary" id="add-team-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Добавить команду
                    </button>
                </div>
                <p class="hint">Управление командами по турнирам</p>
                
                <div id="teams-admin-container">
                    <!-- Teams will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Disciplines Tab -->
        <div class="tab-content" id="disciplines-tab">
            <div class="links-container">
                <h2>Управление дисциплинами</h2>
                <p class="hint">Добавляйте или удаляйте игровые дисциплины для турниров</p>
                
                <div class="form-group" style="max-width: 500px; margin-bottom: 20px;">
                    <label>Добавить новую дисциплину</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" 
                               id="new-discipline-input" 
                               placeholder="Название дисциплины (например, PUBG)"
                               style="flex: 1;">
                        <button class="btn-primary" id="add-discipline-btn">Добавить</button>
                    </div>
                </div>
                
                <div class="disciplines-list" id="disciplines-list">
                    <!-- Disciplines will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Registration Links Tab -->
        <div class="tab-content" id="links-tab">
            <div class="links-container">
                <h2>Ссылки на формы регистрации</h2>
                <p class="hint">Укажите ссылки на Google Forms для каждой дисциплины</p>
                
                <div class="links-grid" id="links-grid">
                    <!-- Links will be loaded here -->
                </div>
                
                <button class="btn-primary" id="save-links-btn">Сохранить ссылки</button>
            </div>
        </div>

        <!-- Regulations Tab -->
        <div class="tab-content" id="regulations-tab">
            <div class="links-container">
                <h2>Управление регламентами</h2>
                <p class="hint">Загрузите PDF файлы с регламентами для каждой дисциплины</p>
                
                <div class="admin-header" style="margin-bottom: 20px;">
                    <button class="btn-primary" id="add-regulation-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Добавить регламент
                    </button>
                </div>
                
                <div id="regulations-list">
                    <!-- Регламенты будут загружены здесь -->
                </div>
            </div>
        </div>

        <!-- Social Buttons Tab -->
        <div class="tab-content" id="social-tab">
            <div class="links-container">
                <h2>Настройка социальных кнопок</h2>
                <p class="hint">Укажите ссылки для кнопок в шапке сайта</p>
                
                <div class="links-grid">
                    <div class="link-item">
                        <label>Twitch (любая ссылка)</label>
                        <input type="text" 
                               class="social-input" 
                               id="twitch-link" 
                               placeholder="Любая ссылка: https://..., mailto:..., tel:...">
                    </div>
                    <div class="link-item">
                        <label>Telegram (любая ссылка)</label>
                        <input type="text" 
                               class="social-input" 
                               id="telegram-link" 
                               placeholder="Любая ссылка: https://..., mailto:..., tel:...">
                    </div>
                    <div class="link-item">
                        <label>Discord (любая ссылка)</label>
                        <input type="text" 
                               class="social-input" 
                               id="discord-link" 
                               placeholder="Любая ссылка: https://..., mailto:..., tel:...">
                    </div>
                    <div class="link-item">
                        <label>Связаться с нами (любая ссылка)</label>
                        <input type="text" 
                               class="social-input" 
                               id="contact-link" 
                               placeholder="Любая ссылка: https://..., mailto:..., tel:...">
                    </div>
                </div>
                
                <button class="btn-primary" id="save-social-btn">Сохранить ссылки</button>
            </div>
        </div>
    </main>

    <!-- Add/Edit Tournament Modal -->
    <div class="modal" id="tournament-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Добавить турнир</h2>
                <button class="modal-close" id="close-modal">&times;</button>
            </div>
            
            <form id="tournament-form">
                <input type="hidden" id="tournament-id">
                
                <div class="form-group">
                    <label for="tournament-name">Название турнира *</label>
                    <input type="text" id="tournament-name" placeholder="Турнир 5X5 CS2 WBCYBERCLUB" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="tournament-discipline">Дисциплина *</label>
                        <select id="tournament-discipline" required>
                            <option value="">Выберите дисциплину</option>
                            <option value="CS 2">CS 2</option>
                            <option value="Dota 2">Dota 2</option>
                            <option value="Valorant">Valorant</option>
                            <option value="Overwatch 2">Overwatch 2</option>
                            <option value="League of Legends">League of Legends</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="tournament-date">Дата турнира *</label>
                        <input type="date" id="tournament-date" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="tournament-prize">Призовой фонд *</label>
                        <input type="text" id="tournament-prize" placeholder="25 000 ₽" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="tournament-max-teams">Максимум команд *</label>
                        <input type="number" id="tournament-max-teams" placeholder="16" min="2" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tournament-custom-link">Пользовательская ссылка (необязательно)</label>
                    <input type="text" id="tournament-custom-link" placeholder="Любая ссылка: https://forms.gle/..., https://...">
                    <small>Если не указана, будет использована ссылка из настроек дисциплины</small>
                </div>
                
                <div class="form-group" id="winner-field" style="display: none;">
                    <label for="tournament-winner">Победитель (для прошедших турниров)</label>
                    <input type="text" id="tournament-winner" placeholder="Название команды-победителя">
                </div>
                
                <input type="hidden" id="tournament-status" value="active">
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" id="cancel-btn">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Team Modal -->
    <div class="modal" id="team-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="team-modal-title">Добавить команду</h2>
                <button class="modal-close" id="close-team-modal">&times;</button>
            </div>
            
            <form id="team-form">
                <input type="hidden" id="team-tournament-id">
                <input type="hidden" id="team-index">
                
                <div class="form-group">
                    <label for="team-tournament">Турнир *</label>
                    <select id="team-tournament" required>
                        <option value="">Выберите турнир</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="team-name">Название команды *</label>
                    <input type="text" id="team-name" placeholder="Team Spirit" required>
                </div>
                
                <div class="form-group">
                    <label for="team-players">Количество игроков *</label>
                    <input type="number" id="team-players" placeholder="5" min="1" required>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" id="cancel-team-btn">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Regulation Modal -->
    <div class="modal" id="regulation-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="regulation-modal-title">Добавить регламент</h2>
                <button class="modal-close" id="close-regulation-modal">&times;</button>
            </div>
            
            <form id="regulation-form">
                <input type="hidden" id="regulation-id">
                
                <div class="form-group">
                    <label for="regulation-discipline">Дисциплина *</label>
                    <select id="regulation-discipline" required>
                        <option value="">Выберите дисциплину</option>
                        <!-- Опции будут добавлены динамически -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="regulation-name">Название регламента</label>
                    <input type="text" 
                           id="regulation-name" 
                           placeholder="Например: Регламент сезона 2025, Регламент для новичков и т.д.">
                    <p class="hint">Необязательно. Позволяет различать несколько регламентов по одной дисциплине</p>
                </div>
                
                <div class="form-group">
                    <label for="regulation-pdf-url">Ссылка на PDF файл *</label>
                    <input type="text" 
                           id="regulation-pdf-url" 
                           placeholder="https://example.com/regulation.pdf" 
                           required>
                    <p class="hint">Загрузите PDF файл на любой хостинг и вставьте ссылку</p>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" id="cancel-regulation-btn">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- API Client -->
    <script src="js/api-client.js"></script>
    <!-- Particles -->
    <script src="js/particles.js"></script>
    <!-- Animations -->
    <script src="js/animations.js"></script>
    <!-- Admin Script -->
    <script src="js/admin-api.js"></script>
</body>
</html>

