@echo off
chcp 65001 >nul 2>&1
cls
echo ====================================================
echo   ФИНАЛЬНОЕ ИСПРАВЛЕНИЕ - СИНХРОНИЗАЦИЯ
echo ====================================================
echo.
echo [FIX 1] Убран автоматический вызов loadTournamentsFromStorage
echo [FIX 2] Добавлено логирование сохранения
echo [FIX 3] Создан CHECK-STORAGE.html для диагностики
echo.
echo ====================================================
echo.

cd /d "%~dp0"

echo [1/3] Добавляем все файлы...
git add -A
echo       ✓ Файлы добавлены

echo.
echo [2/3] Создаём коммит...
git commit -m "Fix: Убран двойной вызов loadTournamentsFromStorage + диагностика"
echo       ✓ Коммит создан

echo.
echo [3/3] Отправляем на GitHub...
git push origin main --force
echo       ✓ Отправлено на GitHub

echo.
echo ====================================================
echo    ✅ ГОТОВО! 
echo ====================================================
echo.
echo ЧТО ДЕЛАТЬ ДАЛЬШЕ (через 1-2 минуты):
echo.
echo 1. Открой: CHECK-STORAGE.html (локально)
echo    - Посмотри что в localStorage
echo    - Если пусто - нажми "Очистить ВСЁ"
echo.
echo 2. Открой админку: https://твойсайт.vercel.app/admin.html
echo    - Пароль: admin123
echo    - Настрой ВСЁ заново:
echo      a) Вкладка "Ссылки на формы" - добавь ссылки
echo      b) Вкладка "Социальные кнопки" - добавь ссылки
echo      c) Вкладка "Активные турниры" - добавь турниры
echo.
echo 3. Открой главную страницу + F12 (консоль)
echo    - Должны быть зелёные галочки ✅
echo    - Проверь что кнопки работают
echo.
echo ====================================================
pause

