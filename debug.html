<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>DEBUG - WB Cyber Club</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #ff6b9d;
            border-bottom: 2px solid #ff6b9d;
            padding-bottom: 10px;
        }
        .section {
            background: #16213e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #ff6b9d;
        }
        h2 {
            color: #ff6b9d;
            margin-top: 0;
        }
        pre {
            background: #0f0f0f;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            color: #0f0;
            font-size: 12px;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            margin: 5px 0;
        }
        .status.ok {
            background: #00ff88;
            color: #000;
        }
        .status.warning {
            background: #ffaa00;
            color: #000;
        }
        .status.error {
            background: #ff4444;
            color: #fff;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        th {
            background: #0f0f0f;
            color: #ff6b9d;
        }
        tr:hover {
            background: #1a1a2e;
        }
        button {
            background: #ff6b9d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s;
        }
        button:hover {
            background: #ff4d85;
            transform: translateY(-2px);
        }
        .actions {
            text-align: center;
            margin: 30px 0;
        }
        .link {
            color: #00aaff;
            word-break: break-all;
        }
        .hint {
            background: #0f3460;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 3px solid #00aaff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç DEBUG - WB Cyber Club</h1>
        
        <div class="section">
            <h2>üìä –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å</h2>
            <div id="general-status"></div>
        </div>
        
        <div class="section">
            <h2>üéÆ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã</h2>
            <div id="tournaments-status"></div>
        </div>
        
        <div class="section">
            <h2>üìù –°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</h2>
            <div id="links-status"></div>
        </div>
        
        <div class="section">
            <h2>üîó –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h2>
            <div id="social-status"></div>
        </div>
        
        <div class="section">
            <h2>üéØ –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã</h2>
            <div id="disciplines-status"></div>
        </div>
        
        <div class="section">
            <h2>üíæ RAW –¥–∞–Ω–Ω—ã–µ localStorage</h2>
            <pre id="raw-data"></pre>
        </div>
        
        <div class="actions">
            <button onclick="location.reload()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            <button onclick="clearStorage()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
            <button onclick="window.open('admin.html', '_blank')">‚öôÔ∏è –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É</button>
            <button onclick="window.open('index.html', '_blank')">üè† –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç</button>
        </div>
    </div>

    <script>
        function checkStorage() {
            // –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å
            let generalHTML = '';
            
            const tournaments = localStorage.getItem('wbcyber_tournaments');
            const links = localStorage.getItem('wbcyber_registration_links');
            const social = localStorage.getItem('wbcyber_social_links');
            const disciplines = localStorage.getItem('wbcyber_disciplines');
            
            const hasData = tournaments || links || social || disciplines;
            
            if (hasData) {
                generalHTML += '<span class="status ok">‚úÖ localStorage —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ</span><br>';
            } else {
                generalHTML += '<span class="status error">‚ùå localStorage –ü–£–°–¢–û–ô - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É!</span><br>';
            }
            
            generalHTML += `<p><strong>–¢–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω:</strong> ${window.location.origin}</p>`;
            generalHTML += '<div class="hint">‚ö†Ô∏è <strong>–í–ê–ñ–ù–û:</strong> localStorage –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –¥–æ–º–µ–Ω—É! –î–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –ù–ï –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –Ω–∞ Vercel –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç!</div>';
            
            document.getElementById('general-status').innerHTML = generalHTML;
            
            // –¢—É—Ä–Ω–∏—Ä—ã
            if (tournaments) {
                const data = JSON.parse(tournaments);
                let html = `<span class="status ok">‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ç—É—Ä–Ω–∏—Ä–æ–≤: ${data.active?.length || 0} –∞–∫—Ç–∏–≤–Ω—ã—Ö, ${data.past?.length || 0} –ø—Ä–æ—à–µ–¥—à–∏—Ö</span>`;
                
                if (data.active && data.active.length > 0) {
                    html += '<table><tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th><th>–°—Å—ã–ª–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th></tr>';
                    data.active.forEach(t => {
                        const linkStatus = t.registrationLink && t.registrationLink !== '#' 
                            ? '<span class="status ok">‚úÖ</span>' 
                            : '<span class="status error">‚ùå</span>';
                        html += `<tr>
                            <td>${t.title}</td>
                            <td>${t.discipline}</td>
                            <td>${linkStatus} <span class="link">${t.registrationLink || '–ù–ï–¢'}</span></td>
                        </tr>`;
                    });
                    html += '</table>';
                }
                document.getElementById('tournaments-status').innerHTML = html;
            } else {
                document.getElementById('tournaments-status').innerHTML = '<span class="status warning">‚ö†Ô∏è –¢—É—Ä–Ω–∏—Ä—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã</span>';
            }
            
            // –°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–æ—Ä–º—ã
            if (links) {
                const data = JSON.parse(links);
                const keys = Object.keys(data);
                
                if (keys.length > 0) {
                    let html = `<span class="status ok">‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Å—Å—ã–ª–æ–∫: ${keys.length}</span>`;
                    html += '<table><tr><th>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th><th>–°—Å—ã–ª–∫–∞</th><th>–°—Ç–∞—Ç—É—Å</th></tr>';
                    
                    keys.forEach(key => {
                        const link = data[key];
                        const isValid = link && !link.includes('translate.google');
                        const status = isValid 
                            ? '<span class="status ok">‚úÖ OK</span>' 
                            : '<span class="status error">‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø</span>';
                        
                        html += `<tr>
                            <td>${key}</td>
                            <td><span class="link">${link}</span></td>
                            <td>${status}</td>
                        </tr>`;
                    });
                    html += '</table>';
                    
                    if (JSON.stringify(data).includes('translate.google')) {
                        html += '<div class="hint">‚ùå <strong>–û–®–ò–ë–ö–ê:</strong> –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ Google Translate! –ó–∞–º–µ–Ω–∏—Ç–µ –∏—Ö –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ Google Forms!</div>';
                    }
                    
                    document.getElementById('links-status').innerHTML = html;
                } else {
                    document.getElementById('links-status').innerHTML = '<span class="status warning">‚ö†Ô∏è –°—Å—ã–ª–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã</span>';
                }
            } else {
                document.getElementById('links-status').innerHTML = '<span class="status warning">‚ö†Ô∏è –°—Å—ã–ª–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã</span>';
            }
            
            // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
            if (social) {
                const data = JSON.parse(social);
                let html = '<table><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–°—Å—ã–ª–∫–∞</th><th>–°—Ç–∞—Ç—É—Å</th></tr>';
                
                ['twitch', 'telegram', 'contact'].forEach(key => {
                    const link = data[key];
                    const status = link && link !== '#' 
                        ? '<span class="status ok">‚úÖ</span>' 
                        : '<span class="status warning">‚ö†Ô∏è</span>';
                    
                    html += `<tr>
                        <td>${key}</td>
                        <td><span class="link">${link || '–ù–ï–¢'}</span></td>
                        <td>${status}</td>
                    </tr>`;
                });
                html += '</table>';
                document.getElementById('social-status').innerHTML = html;
            } else {
                document.getElementById('social-status').innerHTML = '<span class="status warning">‚ö†Ô∏è –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã</span>';
            }
            
            // –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
            if (disciplines) {
                const data = JSON.parse(disciplines);
                document.getElementById('disciplines-status').innerHTML = 
                    `<span class="status ok">‚úÖ –î–∏—Å—Ü–∏–ø–ª–∏–Ω: ${data.length}</span><br>` +
                    `<p>${data.join(', ')}</p>`;
            } else {
                document.getElementById('disciplines-status').innerHTML = '<span class="status warning">‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã</span>';
            }
            
            // RAW –¥–∞–Ω–Ω—ã–µ
            const allData = {
                tournaments: tournaments ? JSON.parse(tournaments) : null,
                registration_links: links ? JSON.parse(links) : null,
                social_links: social ? JSON.parse(social) : null,
                disciplines: disciplines ? JSON.parse(disciplines) : null
            };
            
            document.getElementById('raw-data').textContent = JSON.stringify(allData, null, 2);
        }
        
        function clearStorage() {
            if (confirm('‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!\n\n–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–¥–º–∏–Ω–∫—É.')) {
                localStorage.clear();
                alert('‚úÖ localStorage –æ—á–∏—â–µ–Ω!\n\n–¢–µ–ø–µ—Ä—å:\n1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É\n2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Å—ë –∑–∞–Ω–æ–≤–æ\n3. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É');
                location.reload();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        checkStorage();
    </script>
</body>
</html>

